class Payment < ApplicationRecord

  # Macros: Accessors --------------------------------------------------------------------------------------------------
  attr_accessor :type
  # --------------------------------------------------------------------------------------------------------------------


  # Macros: Relations --------------------------------------------------------------------------------------------------
  belongs_to :order
  # --------------------------------------------------------------------------------------------------------------------


  # Macros: Validations ------------------------------------------------------------------------------------------------
  validates_presence_of :payment_type, :value
  validates_numericality_of :value, greater_than_or_equal_to: 0
  # --------------------------------------------------------------------------------------------------------------------


  # Setters & Getters Customizations -----------------------------------------------------------------------------------
  def type(value)
    read_attribute(:payment_type)
  end

  def type=(value)
    write_attribute(:payment_type, value.upcase)
  end
  # --------------------------------------------------------------------------------------------------------------------


  # Public Instance Methods --------------------------------------------------------------------------------------------
  # Procurei uma customização no activesupport mas não encontrei. Precisaria de mais tempo.
  def as_json(options = nil)
    json = super(options)
    json['value'] = value.to_f
    json
  end
  # --------------------------------------------------------------------------------------------------------------------

end
